<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Distributed P2P CMS Example - GraphDB (GDB)</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/showdown/2.1.0/showdown.min.js"></script>
</head>
<body>
    <div class="app-container">
        <aside class="menu-column">
            <h2>dCMS - (GDB)</h2>
            <nav>
                <ul>
                    <li><button id="navViewList">View Posts (Grid)</button></li>
                    <li><button id="navNewPost">New Post</button></li>
                </ul>
            </nav>
        </aside>

        <main class="content-column">
            <!-- Post List Section (MAIN Image Grid) -->
            <section id="postListSection" class="view-section">
                <h1>All Posts (Grid)</h1>
                <div id="postsGridContainer">
                    <!-- Grid items will be loaded here -->
                </div>
            </section>

            <!-- Individual Post Viewer Section -->
            <section id="postViewSection" class="view-section">
                <button class="back-button" id="backToListViewFromPost">← Back to list</button>
                <article id="postDisplay">
                    <h1 id="postViewTitle"></h1>
                    <p class="meta" id="postViewMeta"></p>
                    <img id="postViewImage" src="" alt="Post Image">
                    <div id="postViewContent" class="markdown-body"></div>
                </article>
            </section>

            <!-- Post Editor Section -->
            <section id="editorSection" class="view-section editor-layout">
                <div class="editor-form-column">
                    <button class="back-button" id="backToListViewFromEditor">← Back to list</button>
                    <h1 id="editorTitle">Create/Edit Post</h1>
                    <form id="postForm">
                        <label for="title">Title:</label>
                        <input type="text" id="title" name="title" required>

                        <label for="slug">Slug:</label>
                        <input type="text" id="slug" name="slug" readonly>

                        <label for="description">Short Description:</label>
                        <textarea id="description" name="description" rows="3"></textarea>

                        <label for="tags">Tags (comma-separated):</label>
                        <input type="text" id="tags" name="tags">

                        <label for="imageUrl">Image URL:</label>
                        <input type="text" id="imageUrl" name="imageUrl" placeholder="https://example.com/image.jpg" required>

                        <label for="status">Status:</label>
                        <select id="status" name="status">
                            <option value="draft">Draft</option>
                            <option value="published">Published</option>
                        </select>

                        <label for="content">Content (Markdown):</label>
                        <textarea id="content" name="content" rows="15"></textarea>
                        
                        <div class="editor-actions">
                            <button type="submit">Save Post</button>
                            <button type="button" id="deletePostBtn" style="display: none;">Delete Post</button>
                        </div>
                    </form>
                </div>
                <div class="editor-preview-column">
                    <h3>Markdown Preview</h3>
                    <div class="word-counter">Words: <span id="wordCount">0</span></div>
                    <div id="markdownPreview" class="markdown-body"></div>
                </div>
            </section>
        </main>

        <footer class="footer-column">
            <h2>Latest Updated Posts</h2>
            <ul id="latestPostsList">
                <!-- Latest posts will be loaded here -->
            </ul>
        </footer>
    </div>

    <script type="module" src="app.js"></script>
</body>
</html>